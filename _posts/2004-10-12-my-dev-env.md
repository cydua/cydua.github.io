---
title: "说说我的开发环境的搭建"
date: 2004-10-12 15:23:00
layout: post
categories: VM
tags: VM
---

我现在的项目是一个电信企业的企业门户，使用SPS2003来搭建。为此项目专门申请调配了一个内存1GB+256MB的PC做服务器。

做这个开发环境有两个方案，一个方案是所有的软件安装都安装在这个物理服务器上面，另一种方案是在这个PC上面做若干个虚拟机，模拟真实的环境。

首先说说第一个方案。第一个方案需要将这个PC安装Win2003系统，并建成主域控制器。安装应用服务器(IIS+ASP.NET)，之后还要代开SMTP和NNTP，然后再安装Exchange2003、SQL2000+sp3。最后就可以安装SPS2003了。值得注意的是，安装应用服务器的时候不能安装Frontpage扩展，这个扩展和SPS2003有冲突。

这个方案的优点是速度快、一台服务器便于移动，然而缺点却比较多，。这个PC应为自己作为主域控制器，所以不适合（不等于不能）再加入现有的域。同时这个PC不容易管理，Win2003的终端服务器必须有终端授权证书服务器才可以不限时间的运行，但是即使是免激活的开放许可Win2003里面的终端证书服务器也是需要激活的，电话激活或者互联网激活都比较麻烦（需要开放授权的ID）。否则就要使用其它的远程管理软件，会产生其它的费用。如果将来有新的服务器或者PC调配过来，软件迁移到其它的服务器很麻烦。

再说第二个方案。这个方案的是将所有的软件都安装在虚拟机里面。宿主服务器的操作系统可以选择Win2003或者Linux。如果宿主服务器是Win2003，那么虚拟机软件必须是Visual Server 2005。如果想要宿主服务器使用Linux，可以直接使用VMware ESX Server，它内置一个定制的Linux系统，可以安装在无系统的主机上面。VMware ESX Server和Visual Server 2005比较，主要是强在VMware可以设置虚拟机具体使用几个CPU，和具体使用哪个CPU。

我现在使用的就是第二个方案。建了两个虚拟PC，第一个虚拟PC作为域控制器，安装了Exchange2003和SQL2000+sp3，分配了256MB内存。第二个虚拟PC只安装了SPS2003，分配了512内存。

这样做的优点是都可以通过Web远程管理，同时自带远程管理工具和虚拟终端。VMware ESX Server的虚拟终端可以是任何VNC软件，而Visual Server 2005的虚拟终端叫 VMRC（Virtual Nachine Remote Control Client），不需要单独的授权。虚拟机搬迁起来也很方便，将虚拟机的配置文件和相应的虚拟硬盘文件搬迁到新的服务器然后导入虚拟机就可以了。缺点就是速度比物理服务器实现的慢，相应对宿主服务器的硬件要求要高！

这两种方案各有千秋，可以用在不同的时候。比如我在去帮助市场人员做售前给客户演示门户系统的时候就是使用的第一种方案，将所有的软件装在了一个1G内存的笔记本电脑上面。而我们在内部开发的时候使用的就是第二种方案，毕竟服务器的速度要比笔记本电脑快的多。